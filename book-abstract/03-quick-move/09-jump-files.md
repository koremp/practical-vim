# 9장 점프 명령으로 파일 사이 이동하기

## Tip.56 점프 목록 가로지르기

- `<C-o>` 명령: 뒤로 가기 버튼과 같은 동작
- `<C-i>` 명령: 누르면 앞으로 가기 버튼과 같이 동작

모션은 파일을 이동할 때 사용하는 명령을 뜻하고, 점프는 파일 사이를 돌아다닐 때 사용하는 명령을 의미한다. (완벽하게 올바른 정의는 아니다. 일부 모션 중에도 점프로 구분되는 모션이 있다.)

```vim
:jumps
```

`:edit` 명령으로 새 파일을 열었다면 새로 연 파일과 이전에 열려 있던 파일을 `<C-o>`와 `<C-i>` 명령을 사용해서 이동할 ㅅ ㅜ있다.

`[숫자]G` 명령을 사용해서 특정 행으로 바로 이동하는 동작은 점프로 처리된다.
위아래 방향키를 입력해서 한 번에 한 행씩 이동하는 점프로 처리되지 않는다.
문장 범위, 문단 범위를 이동하는 모션은 점프에 해당한다.
문자 단위나 단어 단위 모션은 점프가 아니다.

단순하게 생각해서 먼 거리를 이동하면 점프로, 가까운 거리를 이동하면 모션으로 볼 수 있다.

- `[숫자]G`: 행 번호로 점프
- `/패턴<CR>`, `?패턴<CR>`, `n`, `N`: 전후에서 해당 패턴이 나타나는 곳으로 점프
- `%`: 일치하는 괄호로 점프하기
- `(`, `)`: 이전/다음 문장의 시작으로 점프하기
- `{`, `}`: 이전/다음 문단의 시작으로 점프하기
- `H`, `M`, `L`: 화면의 상단/중단/하단으로 점프하기
- `gf`: 커서가 놓여 있는 파일명을 열기
- `<C-]>`: 커서가 놓여 있는 키워드의 정의로 점프하기
- ``` '{마크}```, ``` `{마크}```: 마크로 이동하기

`<C-o>`와 `<C-i>` 명령 자체는 모션으로 처리되지 않는다.
다시 말하면 이 두 가지 점프 목록 이동 명령은 비주얼 모드에서 선택 영역을 확장하거나 오퍼레이터-대기 모드에서 이 명령을 사용할 수 없다는 뜻이다.

점프 목록은 수정하면서 거쳐온 위치 중에서 다시 돌아갈 수 있는 발자취 목록이라고 생각할 수 있다.

Vim은 여러 점프 목록을 동시에 관리한다.

## Tip.57 변경 목록 가로지르기

Vimㅇ는 작업을 취하ㄴ 명령과 취한 작업을 다 번복하는 명령 두 가지가 존재한다.
각각의 명령을 실행하고 나면 가장 최근에 변경한 위치로 커서를 이동하는 부차적인 효과도 생긴다.
그래서 실행 취소 명령은 문서 중 최근 변경 위치로 돌아가고 싶은 경우에도 유용하게 사용할 수 있다.
입력을 취소하는 명령과 입력 취소를 되돌리는 명령을 함께 사용해서 `u<C-r>`을 입력하면 마지막 변경 위치로 손쉽게 커서를 이동할 수 있다.

Vim은 버퍼에서 내용을 수정하는 동안의 내역을 목록으로 관리하고 있다.
이 목록을 변경 목록이라고 한다. (`:h changelist` 참고)

```vim
:changes
```

명령을 입력한 결과를 보면 Vim이 각각 변경을 수행한 행과 열 번호를 목록으로 저장하고 있다.
변경목록에서 `g;`과 `g,` 명령을 사용하면 이 목록의 항목을 전후로 살펴볼 수 있다.
`;`와 `,` 명령이 `f{문자}` 검색 명령을 반복하거나 반대 방향으로 검색하는 기능을 한다는 것과 비슷하게 기능한다.

문서에서 가장 최근 변경한 위치로 이동하려면 `g;`을 입력한다. 그러면 마지막으로 수정했던 행과 열로 커서가 이동한다.
`u<C-r>`을 입력해도 가장 최근 변경한 위치로 이동하지만, 이 명령은 문서를 변경하는 방식으로 이동하는 편법을 쓰는 것이기 때문에 좋은 방법은 아니다.

### 마지막 변경에 마크 생성하기

Vim은 변경 목록을 보완하기 위해서 몇 가지 마크를 자동으로 생성한다.
``` `.``` 마크는 항상 마지막 변경의 위치를 참조한다.
``` `^``` 마크에는 마지막으로 끼워넣기 모드를 종료한 위치를 기록한다.

대부분의 시나리오에서 ``` `.``` 마크로 이동하면 `g;` 명령과 결과가 동일하다.
변경 목록은 여러 위치를 저장하지만 ``` `.``` 마크는 가장 마지막 변화에 대한 위치를 저장한다.
`g;`를 반복해서 입력하면 변경 목록에서 저장된 위치를 순서대로 계속 이동할 수 있다.
``` `.```은 변경 목록에서 가장 마지막에 해당하는 위치로만 이동한다.

마지막 입력의 시작 위치를 저장하는 ``` `^``` 마크는 좀 더 특별한 상황에서 생성된다.
끼워넣기 모드를 떠나거나, 문서를 스크롤하면서 내용을 살펴보다가 마지막으로 수정했던 위치에서 바로 끼워넣기 모드로 시작하고 싶다면 `gi` 명령을 사용하면 된다. (`h gi` 참고)
내용 입력을 모두 끝낸 다음에 커서의 위치를 다시 끼워넣기 모드를 시작했던 위치로 이동해서 계속 입력하고 싶다면 ``` `^``` 마크로 커서 위치를 옮긴 뒤에 끼워넣기 모드로 변환하면 된다.

Vim은 변경 목록을 각각의 개별적인 버퍼를 기준을 나눠 관리한다.
점프 목록의 경우는 각각의 창을 기준으로 만들어서 관리한다.

## Tip.58 커서 밑 파일명으로 이동하기

Vim은 문서에 있는 파일명을 웹 페이지의 하이퍼링크처럼 사용할 수 있다.

셸에서 `jumps` 폴더로 이동한 다음에 Vim을 구동한다. 데모에서는 별도의 플러그인 없이 구동되는 것을 보여주기 위해 `-u NONE -N` 플래그를 추가했다.

```bash
cd codes/jumps
vim -u NONE -N practical_vim.rb
```

```ruby
# jumps/practical_vim.rb
require 'practical_vim/core'
require 'practical_vim/more'
```

`gf` 명령은 `require` 로 표시된 파일을 잠깐 열어서 바르게 확인할 수 있다. (`:h gh` 참고)

커서를 `'practical_vim/core'` 문자열 위로 이동한다. `fp`를 누르면 커서가 해당 위치로 바로 이동할 것이다.
`gf` 명령을 사용해본다. 아쉽게도 오류가 뜰 것이다.
`practical_vim/core` 파일을 열려고 했지만 파일이 존재하지 않는다는 오류가 발생했기 때문이다.

Vim이 실제로 커서 밑에 있는 파일명으로 파일을 열기 전에, 해당 파일이 어떤 확장자를 덧붙여야 하는지 알려줘야한다.
`'suffixesadd'` 옵션을 사용할 수 있다.

### 파일 확장자 정하기

`'suffixesadd'` 설정에는 하나 이상의 파일 확장자를 지정할 수 있다.
`gf` 명령을 실행해서 파일명을 확인할 때 이 옵션에 저장되어 있는 확장자를 사용하는 파일이 있는지 확인한다. (`:h suffixesadd` 참고)

`:set suffixesadd+=.rb`

이제 `gf` 명령을 사용하면 커서 밑에 있는 파일 경롤의 파일로 바로 이동한다.

Vim은 gf 명령을 사용할 때마다 점프 목록에 이 내용을 모두 기록한다.
`<C-o>` 명령을 사용하면 언제든 다시 이전 파일로 돌아갈 수 있따.

### 특정 폴더 내에서만 찾기

